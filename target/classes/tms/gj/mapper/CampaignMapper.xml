<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- <mapper namespace="tms.gj.mapper.CampaignMapper"> -->
<mapper namespace="tms.gj.mapper.CampaignMapper">

	<select id="campaignCount" resultType="int">
		select count(*)
		from campaign
	</select>
	
	<select id="campaignList" resultType="tms.gj.domain.CampaignVO">
		SELECT 
		department,
		sum(if(rate=100,1,0)) as successCount,
		count(department) as totalCount, 
		(sum(if(rate=100,1,0))/count(department)) * 100  as successRate
		FROM innodep_db.campaign
		Group by department;
	</select>

</mapper>